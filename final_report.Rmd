
## **Spotify Data Exploration** 
#### Authors: Justin Park, Marcella Anderson, Caitlin Fordell, Desmond Orton, Mario Lloyd Galvao-Wilson, and Brian Sayre

![](./spotify.jpg){width=50%}
<hr>

## **Introduction**
Music is widely enjoyed around the world but rarely does one question what metrics define <i>good music</i>. In such an assesment, one needs to quantify qualities of music. To determine what metrics need to be used an analysis of popularity compared to aspects of music, including but not limited to, energy, liveliness, danceability, et cetera, needs to be considered. The data sets used in this analysis are the "Data from 1921-2021 of songs on Spotify" and "2019 Top 50 Songs on Spotify" which have been taken from Kaggle. "Data from 1921-2021 of songs on Spotify" contains over 175,000 songs spanning from 1912 until 2020. "2019 Top 50 Songs on Spotify" shows the top 50 songs of 2019 from all over the globe. Using these datasets and methods in R, we evaluated top artists from the year based on trends in music related metrics and popularity over time.

<hr>

## **Research Questions**
To achieve our goal, we have developed five general areas of exploration with the following five research questions: 

- What are the most frequent genres of the top artists?
- Do the most popular artists align well with the rest of their genre?
- How have energy, liveliness, danceability, duration, speechiness, and tempo changed throughout the years?
- Did the information about the most popular artist during a given year follow the change of energy, liveliness, danceability, duration, speechiness, and tempo?
- What are the most popular genres and artists?
- Are there any audio features that most top songs have in common?


<hr>

## **Overview of the Dataset**
Two datasets were used in this analysis: "Data from 1921-2021 of songs on Spotify", "2019 Top 50 Songs on Spotify". These datasets were gathered from Kaggle but originally scraped from the Spotify public API or organizeyourmusic.playlistmachinery.com. "Data from 1921-2021 of songs on Spotify" contains over 175,000 songs spanning from 1912 until 2020. This data compares songs by their genre, year of release, artist, and so forth. "2019 Top 50 Songs on Spotify" shows the top 50 songs of 2019 from all over the globe. Both datasets contain a combination of categorical and numerical data that can be used for analysis.

#### **Obtaining the dataset**
We obtained both sets of data from Kaggle.  
- The first dataset we used was *Data from 1921-2021 of songs on Spotify* which can be found [here](https://www.kaggle.com/yamaerenay/spotify-dataset-19212020-160k-tracks).   
- The second dataset we used was *2019 Top 50 Songs on Spotify* which can be found [here](https://www.kaggle.com/leonardopena/top50spotify2019).   
  
#### **What is in the dataset**
*Data from 1921-2021 of songs on Spotify*  
This dataset contains over 175,000 songs spanning from 1912 until 2020. This data was collected from the spotifyAPI. This data compares songs by their genre, year of release, artist, and so forth.  
  
*2019 Top 50 Songs on Spotify*   
This dataset shows the top 50 songs of 2019 from all over the globe. The data was originally gathered from http://organizeyourmusic.playlistmachinery.com. The dataset contains 13 different variables.
  
Our dataset and the code can be found at https://github.com/dorton21/ds202_final

<hr>

## **Exploratory Analysis**

```{r, echo=FALSE, message=FALSE, warning=FALSE, results=FALSE}
library(tidyverse)
library(lubridate)
library(dplyr)
library(ggplot2)
library(ggpubr)
library(reshape)
```

#### **- What are the most frequent genres of the top artists?**

```{r, echo=FALSE, message = FALSE, warning = FALSE, results=FALSE, fig.align='default', fig.show="hold", out.width="50%"}
genres <- read.csv("./1921_2020_spotify/data_by_genres.csv")
artists <- read.csv("./1921_2020_spotify/data_w_genres.csv")
```

```{r, echo=FALSE, message = FALSE, warning = FALSE, results=FALSE, fig.align='default', fig.show="hold", out.width="50%"}
topArtists <- arrange(artists, -popularity) %>%
  filter(genres != "[]") %>%
  head(100)
```

```{r, echo=FALSE, message = FALSE, warning = FALSE, fig.align='default', fig.show="hold"}
topArtists$genres <- substr(topArtists$genres, 3, nchar(topArtists$genres)-2)
topArtistsList <- topArtists %>%
  separate(col=genres, sep="\', \'", into=c("g1", "g2", "g3", "g4", "g5", "g6"))

genreTable <- table(topArtistsList$g1)
genreCount <- as.data.frame(genreTable)
genreCount <- filter(genreCount, Freq > 2)

ggplot(genreCount,aes(x=reorder(Var1, -Freq), y=Freq)) + 
  geom_bar(stat='identity', fill="blue") +
  xlab("Artists' Genre") + 
  ylab("Number of occurances in top 100 Artists")
```
 
We can see from the plot the top 7 genres of artists currently in the top 100. The results surprised me a little bit at first until I remember that this data is world-wide so it would make sense that the most popular in the use, like dance pop and pop, aren't necessarily the top in the whole world.

#### **- Do the most popular artists align well with the rest of their genre?**

Plot the top artists of the latin and pop genres to compare their features with their genre's average.
```{r, echo=FALSE, message = FALSE, warning = FALSE, fig.align='default', fig.show="hold"}

cols <- c("artists", "acousticness", "danceability", "energy", "instrumentalness", "liveness", "speechiness", "valence")

latinArtists <- topArtistsList %>%
  filter(g1 == "latin") %>%
  head(3) %>%
  select(cols)

popArtists <- topArtistsList %>%
  filter(g1 == "pop") %>%
  head(3) %>%
  select(cols)

genresTop <- genres %>%
  dplyr::rename(artists = genres) %>%
  select(cols) %>%
  filter(artists == "latin" | artists == "pop")

featureCols <- c("acousticness",	"danceability",	"energy",	"instrumentalness",	"liveness", "speechiness", "valence")

latinBoth <- rbind(genresTop %>% filter(artists == "latin"), latinArtists)
latinMelted <- melt(latinBoth, id.vars="artists", measure.vars=featureCols, variable_name = "feature")
latinPlot <- ggplot(latinMelted, aes(feature, value, fill=artists)) +
  geom_bar(stat = "identity", position = 'dodge')+ 
  theme(axis.text.x = element_text(angle = 45, vjust = 1, hjus=1)) 

popBoth <- rbind(genresTop %>% filter(artists == "pop"), popArtists)
popMelted <- melt(popBoth, id.vars="artists", measure.vars=featureCols, variable_name = "feature")
popPlot <- ggplot(popMelted, aes(feature, value, fill=artists)) +
  geom_bar(stat = "identity", position = 'dodge')+ 
  theme(axis.text.x = element_text(angle = 45, vjust = 1, hjus=1)) 

ggarrange(latinPlot, popPlot,
          labels = c("A", "B"),
          ncol = 1, nrow = 2)
```
  
Plot A represents the latin genre and plot B represents the pop genre. For these plots I used the 3 most popular artists from each genre. I used latin because it is the most frequent genre and pop because it had the artists most likely to be known by our class. We can see in the latin section that danceability, speechiness, and valence for the 3 artist is much higher than the average. On the other hand they had lower acousticness than the average in latin.  
For the pop genre we saw a few different trends. The top 3 artists had a lower danceability, energy, liveness, and valence than average in pop. However, they all had a higher acousticness than the average. This might show a new trend in pop for more slow songs that focus more on the vocals than the music behind them.


#### **- How have energy, liveliness, danceability, duration, speechiness, and tempo changed throughout the years?**
ADD YOUR ANALYSIS HERE
#### **- Did the information about the most popular artist during a given year follow the change of energy, liveliness, danceability, duration, speechiness, and tempo?**
```{r}
#group by artist and year. 
#add together the popularity of each artist for that year (average song value, add all song value, try both)
#only get the most popular artist of each year

artistByYear <- all %>%
  group_by(artists, year) %>%
  summarize(popularityByArtist = sum(popularity), 
            acousticnessArt = mean(acousticness), 
            danceabilityArt = mean(danceability),
            energyArt = mean(energy),
            durationArt = mean(duration_ms), 
            instrumentalnessArt = mean(instrumentalness), 
            tempoArt = mean(tempo), 
            livenessArt = mean(liveness), 
            loudnessArt = mean(loudness),
            speechinessArt = mean(speechiness)) %>%
  group_by(year) %>%
  top_n(1, popularityByArtist) %>%
  arrange(year)

yearWithArtist <- full_join(years, artistByYear, by='year')

#Acousticness
ggplot(yearWithArtist, aes(x=year, y = acousticness,color="Yearly Acousticness Average "))+
  geom_line()+scale_color_manual(values=c("deeppink", "black"))+
  geom_line(data=artistByYear, aes(x=year, y = acousticnessArt, color='Top Artists Acousticness'))+
  ylab("Average Acousticness")+ggtitle('Average Acousticness per Year',subtitle='Comparing best artist of the year\'s acousticness to average acousticness')

#Danceability
ggplot(yearWithArtist, aes(x=year, y = danceability,color="Yearly Danceability Average "))+
  geom_line()+scale_color_manual(values=c("firebrick1", "black"))+
  geom_line(data=artistByYear, aes(x=year, y = danceabilityArt, color='Top Artists Danceability'))+
  ylab("Average Danceability")+ggtitle('Average Acousticness per Year',subtitle='Comparing best artist of the year\'s danceability to average danceability')

#Energy
ggplot(yearWithArtist, aes(x=year, y = energy,color="Yearly Energy Average"))+
  geom_line()+scale_color_manual(values=c("sienna1", "black"))+
  geom_line(data=artistByYear, aes(x=year, y = energyArt, color='Top Artists Energy'))+
  ylab("Average Energy")+ggtitle('Average Energy per Year',subtitle='Comparing best artist of the year\'s energy to average energy')

#Duration
ggplot(yearWithArtist, aes(x=year, y = duration_ms,color="Yearly Duration Average"))+
  geom_line()+scale_color_manual(values=c("gold2", "black"))+
  geom_line(data=artistByYear, aes(x=year, y = durationArt, color='Top Artists Duration'))+
  ylab("Average Duration")+ggtitle('Average Duration per Year',subtitle='Comparing best artist of the year\'s duration to average duration')

#Instrumentalness
ggplot(yearWithArtist, aes(x=year, y = instrumentalness,color="Yearly Instrumentalness Average"))+
  geom_line()+scale_color_manual(values=c("forestgreen", "black"))+
  geom_line(data=artistByYear, aes(x=year, y = instrumentalnessArt, color='Top Artists Instrumentalness'))+
  ylab("Average Instrumentalness")+ggtitle('Average Instrumentalness per Year',subtitle='Comparing best artist of the year\'s instrumentalness to average instrumentalness')

#Tempo
ggplot(yearWithArtist, aes(x=year, y = tempo,color="Yearly Tempo Average"))+
  geom_line()+scale_color_manual(values=c("turquoise3", "black"))+
  geom_line(data=artistByYear, aes(x=year, y = tempoArt, color='Top Artists Tempo'))+
  ylab("Average Tempo")+ggtitle('Average Tempo per Year',subtitle='Comparing best artist of the year\'s tempo to average tempo')

#Liveness
ggplot(yearWithArtist, aes(x=year, y = liveness,color="Yearly Liveness Average"))+
  geom_line()+scale_color_manual(values=c("royalblue2", "black"))+
  geom_line(data=artistByYear, aes(x=year, y = livenessArt, color='Top Artists Liveness'))+
  ylab("Average Liveness")+ggtitle('Average Liveness per Year',subtitle='Comparing best artist of the year\'s liveness to average liveness')

#Loudness
ggplot(yearWithArtist, aes(x=year, y = loudness,color="Yearly Loudness Average"))+
  geom_line()+scale_color_manual(values=c("slateblue3", "black"))+
  geom_line(data=artistByYear, aes(x=year, y = loudnessArt, color='Top Artists Loudness'))+
  ylab("Average Loudness")+ggtitle('Average Loudness per Year',subtitle='Comparing best artist of the year\'s loudness to average loudness')

#Speechiness
ggplot(yearWithArtist, aes(x=year, y = speechiness,color="Yearly speechiness Average"))+
  geom_line()+scale_color_manual(values=c("purple", "black"))+
  geom_line(data=artistByYear, aes(x=year, y = speechinessArt, color='Top Artists Speechiness'))+
  ylab("Average Speechiness")+ggtitle('Average Speechiness per Year',subtitle='Comparing best artist of the year\'s speechiness to average speechiness')

```
#### **- What are the most popular genres and artists?**
ADD YOUR ANALYSIS HERE
#### **- Are there any audio features that most top songs have in common?**
ADD YOUR ANALYSIS HERE

<hr>

## **Conclusion**

In conclusion, 

<hr>


## **Personal Contributions**

Our Github repository address is https://github.com/dorton21/ds202_final

#### **Justin Park**

```{R}
top50 <- read.csv("2019_top50_spotify/top50.csv")
str(top50)
```

What are the most popular genres?
```{R}
myvars <- c("Genre", "Popularity")
top50genres <- top50[myvars]

topgenres <- top50genres %>%
  group_by(Genre) %>%
  summarize(Popularity = mean(Popularity))

topgenres <- topgenres[order(-topgenres$Popularity),]

topgenres
```
The genres in the top 50 dataset from 2019 mostly contains pop or rap songs. This is very different from the previous dataset that we used earlier that had more of a variety of genres. I believe these genres represent the young population in the United States. Since younger people (teenagers and young adults) tend to use streaming platforms like Spotify more, their music choices will reflect more on the top 50 songs than any other generation.

Who are the most popular artists?
```{R}
myvars2 <- c("Artist.Name", "Popularity")
top50artists <- top50[myvars2]

topartists <- top50artists %>%
  group_by(Artist.Name) %>%
  summarize(Popularity = mean(Popularity))

topartists <- topartists[order(-topartists$Popularity),]

topartists
```
The top three artists in this dataset were Bad Bunny, Post Malone, and Anuel AA. The top artists of 2019 go hand in hand with the top genres since these names tend to product pop or rap music.

  
#### **Marcella Anderson**  

  
#### **Caitlin Fordell**  

  
#### **Desmond Orton**  
In addition to the work below, Desmond contributed on the writing of the proposal, writing of the final report, creation of the powerpoint, and presentation of the final project.
```{r}
library(tidyverse)
library(plotly)

years <- read.csv("./1921_2020_spotify/data_by_year.csv")
all <- read.csv("./1921_2020_spotify/data.csv")

str(years)
```

```{r}
ggplot(years, aes(x=year, y=acousticness)) + geom_line(color="blue") + ggtitle("Acousticness by Year")
ggplot(years, aes(x=year, y=energy)) + geom_line(color="red") + ggtitle("Energy by Year")
ggplot(years, aes(x=year, y=liveness)) + geom_line(color="green") + ggtitle("Liveness by Year")
ggplot(years, aes(x=year, y=danceability)) + geom_line(color="purple") + ggtitle("Danceability by Year")
ggplot(years, aes(x=year, y=duration_ms)) + geom_line() + ggtitle("Duration by Year")
ggplot(years, aes(x=year, y=tempo)) + geom_line(color="yellow") + ggtitle("Tempo by Year")
ggplot(years, aes(x=year, y=speechiness)) + geom_line(color="pink") + ggtitle("Speechiness by Year")
```

#### **Mario Lloyd Galvao-Wilson**  
In addition to the finalized code below, Mario helped with data aquisition, proposal brainstorming, presentation slides, final report, and the final presentation.
```{r}
library(dplyr)
library(ggplot2)
library(reshape2)
library(tidyr)
genre <- read.csv("./1921_2020_spotify/data_by_genres.csv")
artists <- read.csv("./1921_2020_spotify/data_w_genres.csv")
d <- read.csv("./1921_2020_spotify/data.csv")
```

```{r}
top10g <- genre %>% 
  arrange(-popularity) %>%
  head(10)

top10g %>%
  ggplot(aes(genres, popularity)) + geom_col(fill = 'royalblue3') + theme(axis.text.x = element_text(size = 12, angle = 45, vjust = 1, hjust = 1)) + coord_cartesian(ylim = c(70, 82)) + labs(x = 'Top 10 Genres', y = 'Popularity (scaled)', title = 'Popularity of the Top 10 Genres')
```

```{r}
v <- melt(top10g, id.vars = 'genres')
ggplot(v, aes(genres, value)) + geom_col()
```

```{r}
top10g %>%
  select(-duration_ms, -speechiness, -popularity, -mode, -loudness, -tempo, -key) %>%
  pivot_longer(., cols = !genres) %>%
  ggplot(aes(name, value)) + geom_col(position = 'dodge') + facet_wrap(~genres) + coord_flip() + labs(x = 'Value', y = 'Characteristic', title = 'Values for Each Characteristic of Each Top 10 Genre') + theme_bw()
```
  
#### **Brian Sayre**  
Brian worked on the questions "What are the most frequent genres of the top artists?" and "Do the most popular artists align well with the rest of their genre?". Along with eveyone else he helped put together the final repost and presentation.
  
<hr>